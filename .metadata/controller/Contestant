{
    "id": "ExtBox1-ext-gen12851",
    "type": "controller",
    "reference": {
        "name": "items",
        "type": "array"
    },
    "codeClass": null,
    "userConfig": {
        "models": [
            "Contestant"
        ],
        "stores": [
            "Contestants"
        ],
        "designer|userClassName": "Contestant"
    },
    "customConfigs": [],
    "designerId": "dfd76512-d2fb-483e-af38-408f703fb463",
    "$viewOrder": 0,
    "expanded": true,
    "cn": [
        {
            "id": "ExtBox1-ext-gen14760",
            "type": "controlleraction",
            "reference": {
                "name": "listeners",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "fn": "addContestant",
                "implHandler": "        var me = this;\n\n        Ext.Msg.prompt(\n        'Enter your name',\n        'Please enter your name.',\n        me.newContestant\n        );",
                "name": "tap",
                "designer|targetType": "Ext.Button",
                "designer|controlQuery": "contestants button[ui=action]",
                "designer|userClassName": "addContestant"
            },
            "customConfigs": [],
            "expanded": true
        },
        {
            "id": "ExtBox1-ext-gen16285",
            "type": "controlleraction",
            "reference": {
                "name": "listeners",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "fn": "callWinner",
                "implHandler": "        var contestantStore = Ext.data.StoreMgr.lookup('Contestants'),\n            prizeStore      = Ext.data.StoreMgr.lookup('Prizes');\n\n        if (contestantStore.getCount() < 1) {\n            Ext.Msg.alert('Error', 'No more Contestants left!');\n        }\n        else if (prizeStore.getCount() < 1) {\n            Ext.Msg.alert('Error', 'No more prizes left!');\n        }\n        else {\n            var prize       = prizeStore.getAt(prizeStore.getCount()-1).get('Name'),\n                winnerIndex = this.generateWinIndex(contestantStore),\n                winner      = contestantStore.getAt(winnerIndex).get('Name');\n\n            Ext.Msg.alert(\n            'The winner is...',\n            winner + ' has won the prize: ' + prize + '!'\n            );\n\n            contestantStore.removeAt(winnerIndex);\n            contestantStore.sync();\n\n            prizeStore.removeAt(prizeStore.getCount()-1);\n            prizeStore.sync();\n        }",
                "name": "tap",
                "designer|targetType": "Ext.Button",
                "designer|controlQuery": "contestants button[ui=confirm]",
                "designer|userClassName": "callWinner"
            },
            "customConfigs": [],
            "expanded": true
        },
        {
            "id": "ExtBox1-ext-gen17350",
            "type": "controlleraction",
            "reference": {
                "name": "listeners",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "fn": "clearContestants",
                "implHandler": "        var contestantStore = Ext.data.StoreMgr.lookup('Contestants');\n\n        contestantStore.removeAll();\n        contestantStore.getProxy().clear();",
                "name": "tap",
                "designer|targetType": "Ext.Button",
                "designer|controlQuery": "contestants button[ui=decline]",
                "designer|userClassName": "clearContestants"
            },
            "customConfigs": [],
            "expanded": true
        },
        {
            "id": "ExtBox1-ext-gen5405",
            "type": "basicfunction",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "fn": "generateWinIndex",
                "designer|params": [
                    "contestantStore"
                ],
                "implHandler": "        //TODO: Improve random number generator so that it never returns value of store.length\n        return Math.floor(Math.random() * contestantStore.getCount());",
                "designer|userClassName": "generateWinIndex"
            },
            "customConfigs": [],
            "expanded": true
        },
        {
            "id": "ExtBox1-ext-gen7949",
            "type": "basicfunction",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "fn": "newContestant",
                "designer|params": [
                    "btn",
                    "name"
                ],
                "implHandler": "        if (btn === 'cancel') { return false; }\n\n        if (!name || typeof name !== 'string' || name === '') { return false; }\n\n        var newContestant = new MyApp.model.Contestant({\n            Name: name\n        });\n\n        var contestantStore = Ext.data.StoreMgr.lookup('Contestants');\n\n        contestantStore.add(newContestant);\n        contestantStore.sync();",
                "designer|userClassName": "newContestant"
            },
            "customConfigs": [],
            "expanded": true
        }
    ]
}